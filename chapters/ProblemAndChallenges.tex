%%%%%%%%%%%%%%%%%%%%%%%%%%

%\chapter{O problema e os seus desafios}

%O problema e os seus desafios

% Apesar das soluções \textit{open source} e das inovações tecnológicas, existem ainda desafios a superar. A integração eficaz de mecanismos de auditoria e a utilização de tecnologias como \textit{blockchain} exigem um nível elevado de complexidade técnica. Além disso, a recolha de consentimentos do lado do servidor apresenta-se como um desafio adicional.

% A utilização de \textit{blockchain} fornece evidências públicas e imutáveis que são úteis para um Provedor de Serviços (SP) comprovar os acordos realizados entre um Titular de Dados e ele em relação aos dados pessoais do Titular. 

% No entanto, a oportunidade de criar uma plataforma que facilite a gestão de consentimento de forma transparente, auditável e em conformidade com as regulamentações de privacidade representa um avanço significativo na proteção da privacidade dos utilizadores e na promoção da confiança em soluções digitais.

\chapter{Abordagem proposta}

Apesar das soluções \textit{open source} e das inovações tecnológicas, ainda existem desafios significativos a superar. A recolha de consentimentos do lado do servidor apresenta-se como um desafio adicional, tanto em termos de arquitetura como de conformidade regulatória. Este desafio é amplificado pelo facto de que a maioria das soluções disponíveis de \acrshort{cmp}s são soluções fechadas, dificultando a transparência e assim a auditabilidade dos processos.

As soluções fechadas limitam a capacidade de compreender como os dados são processados e armazenados após o consentimento, dificultando a verificação independente de que as escolhas do utilizador estão a ser respeitadas. Esta falta de visibilidade cria barreiras à adoção de práticas verdadeiramente transparentes e auditáveis, essenciais para garantir a conformidade com regulamentações como o \acrshort{rgpd}.

A utilização de \textit{blockchain} apresenta potencial para este trabalho, pois fornece evidências públicas e imutáveis que podem ser utilizadas por um \acrshort{sp} para comprovar os acordos realizados entre ele e o \textit{titular de dados} relativamente ao uso dos seus dados pessoais. Contudo, a verdadeira inovação reside na oportunidade de criar uma plataforma que permita gerir consentimentos de forma totalmente transparente, auditável e em conformidade com as regulamentações de privacidade, promovendo assim uma maior confiança nas soluções digitais.

Para alcançar esse objetivo, a solução proposta deve adotar uma abordagem que combine transparência, auditabilidade e eficiência. A transparência deve ser garantida, permitindo aos utilizadores compreender exatamente como os seus dados estão a ser processados. Idealmente esta mesma interface deve permitir uma visão clara de como os dados são armazenados e utilizados, assegurando que o utilizador tem algum controlo sobre as suas escolhas, pois caso seja evidenciado que as suas escolhas não são cumpridas este mesmo utilizador tem às suas mãos a ferramenta necessária para o provar e agir sobre essa falha.

A auditabilidade desempenha um papel fundamental, possibilitando o rastreamento detalhado de todas as interações relacionadas com o consentimento. Para tal, a solução deve integrar tecnologias como \textit{\textit{blockchain}}, com a escolha de uma  rede que seja totalmente descentralizada (ex. \textbf{Ethereum}) para ter um registo que sabemos que não possa ter sido manipulado i.e. que permite criar registos imutáveis, assegurando a integridade dos dados e a conformidade com as escolhas dos utilizadores. Além disso, a capacidade de realizar auditorias independentes será reforçada por meio da transparência do código-fonte, uma vez que a adoção de uma abordagem \textit{open source} possibilitará inspeções externas e contribuições colaborativas.

Com estas características, a solução proposta não apenas abordará os desafios técnicos e regulatórios, mas também irá promover confiança, transparência e conformidade no tratamento de dados pessoais.

\section{A Necessidade de \acrshort{cmp}s Open Source}

Uma das principais motivações deste trabalho é a necessidade de soluções mais transparentes e auditáveis. As \acrshort{cmp}s tradicionais, muitas das quais são soluções fechadas, não permitem aos utilizadores ou aos investigadores uma verificação independente de como os dados são tratados. Por outro lado, as \textbf{CMPs \textit{open source}} oferecem a vantagem de serem transparentes e acessíveis, permitindo que o código-fonte seja inspecionado e auditado.

Plataformas \textit{open source} como o \textbf{Klaro.js} e o \textbf{Tarteaucitron.js} oferecem uma maior transparência, permitindo que os desenvolvedores compreendam melhor como os dados são processados e oferecendo a possibilidade de auditar o processo de consentimento. Através do acesso ao código-fonte, os utilizadores e empresas podem verificar se a implementação está em conformidade com as regulamentações de privacidade e garantir que o consentimento dos utilizadores é gerido de forma adequada.

Embora o \textbf{CookieChimp} não seja totalmente \textit{open source}, foi escolhido para este trabalho devido à sua transparência em termos de funcionamento e pela flexibilidade que oferece para integrar e personalizar a gestão de consentimento. Apesar de não permitir uma auditoria total do código, a plataforma fornece uma interface clara e funcionalidades robustas, permitindo realizar uma possível auditoria dos consentimentos fornecidos pelo utilizador e os dados recebidos pelo servidor. Assim, torna-se uma solução prática para as necessidades específicas deste trabalho.

\section{Extensão do Workflow com \textit{blockchain}}

Ao concluir este projeto, teremos um \textit{workflow} robusto e funcional \ref{fig:diagrama-cmp-2} que, seguindo a lógica do figura \ref{fig:diagrama-cmp}, será estruturado da seguinte forma:

\begin{figure}[h]
\centering
\begin{tikzpicture}[node distance=2cm]
    \node (K) [processo, below of=J] {Após a configuração da \acrshort{cmp} (Figura \ref{fig:diagrama-cmp})};
    \node (L) [processo, below of=K] {Servidor regista consentimento via \acrshort{api}};
    \node (M) [processo, below of=L] {ID de consentimento gerado e retornado (JSON)};
    \node (N) [processo, below of=M] {Registo na \textit{blockchain} (servidor e utilizador)};
    \node (O) [processo, below of=N] {Verificação de consistência dos registos};
    \node (P) [processo, below of=O] {Utilizador pode auditar consentimentos};

    \draw [seta] (K) -- (L);
    \draw [seta] (L) -- (M);
    \draw [seta] (M) -- (N);
    \draw [seta] (N) -- (O);
    \draw [seta] (O) -- (P);
\end{tikzpicture}
\caption{Fluxo de implementação de uma \acrshort{cmp} com registo em \textit{blockchain}.}
\label{fig:diagrama-cmp-2}
\end{figure}


Após a recolha do consentimento, tanto no lado do utilizador quanto no servidor (através de um pedido \acrfull{api} que devolve um JSON contendo o ID do consentimento), esse consentimento será armazenado utilizando tecnologia \textit{blockchain}. O objetivo é garantir a imutabilidade e auditabilidade dos registos de consentimento.

O processo pode ser descrito da seguinte forma:

\begin{enumerate}
    \item Após o consentimento ser dado, um pedido \acrshort{api} é feito ao servidor para registar esse evento.
    \item O servidor gera um identificador único (ID) para o consentimento e retorna um JSON contendo essas informações.
    \item Esse ID de consentimento é então registado em uma \textit{blockchain}, tanto do lado do servidor quanto do lado do utilizador.
    \item Uma verificação é feita para garantir que os registos de ambas as partes coincidem, i.e, os consentimentos que o utilizador permitiu são os mesmos que o \acrshort{cmp} guardou do seu lado.
    \item Com esse mecanismo, o utilizador pode, a qualquer momento, auditar os consentimentos dados, garantindo transparência e conformidade com o \acrshort{rgpd}.
\end{enumerate}

Com essa abordagem, é possível estabelecer um sistema automatizado e confiável para que o utilizador possa verificar e auditar os seus consentimentos de maneira segura e transparente.
